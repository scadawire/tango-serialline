<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<Title> Tango Device Server User's Guide </Title>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#7F00FF" ALINK="#FF0000">

<P><!-------TITLE------></P>

<TABLE BORDER="0" WIDTH="100%">
    <TR>
        <TD ALIGN="left">
			<A HREF=http://www.esrf.fr>
			<IMG SRC="http://www.esrf.fr/gifs/logo/80.gif" BORDER=0></A>
		</Td>
        <TD ALIGN="center">
			<A HREF=http://www.elettra.trieste.it/>
			<IMG SRC="http://www.esrf.fr/tango/elettra_logo.gif" BORDER=0></A>

		</Td>
        <TD ALIGN="right">
			<A HREF=http://www.synchrotron-soleil.fr/>
			<IMG SRC="http://www.esrf.fr/tango/soleil_logo.gif" BORDER=0></A>
		</Td>
    	 <Td>
			<H1><FONT COLOR="#0000FF">
			<Center>TANGO <Br> Device Server
			</Center></FONT>
    	</Td>
    </TR>
</TABLE>

<HR WIDTH="100%"></H5>
<Br>
<center>
<h1>
TANGO Device Server		<Br>
Device Commands Description 		<Br> <Br>
Serial Class	<Br>
</h1>
<b>
Revision: 1.5 - Author: taurel
</b>
</center>


<Br>
<Br>
<Br>
<A NAME="Init"><!-- --></A>
<A NAME="Init"><!-- --></A>
<h2>1 - Init</h2>
<ul>
<Li><Strong>Description: </Strong> This commands re-initialise a device keeping the same network connection.<Br>
After an Init command executed on a device, it is not necessary for client to re-connect to the device.<Br>
This command first calls the device <i> delete_device() </i>method and then execute its <i> init_device()</i> method.<Br>
For C++ device server, all the memory allocated in the <i> nit_device() </i> method must be freed in the <i> delete_device() </i> method.<Br>
The language device desctructor automatically calls the <i> delete_device() </i> method.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_VOID</Strong>
 : none.<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : none.<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="State"><!-- --></A>
<A NAME="State"><!-- --></A>
<h2>2 - State</h2>
<ul>
<Li><Strong>Description: </Strong> This command gets the device state (stored in its <i>device_state</i> data member) and returns it to the caller.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_VOID</Strong>
 : none.<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_STATE</Strong>
 : State Code<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="Status"><!-- --></A>
<A NAME="Status"><!-- --></A>
<h2>3 - Status</h2>
<ul>
<Li><Strong>Description: </Strong> This command gets the device status (stored in its <i>device_status</i> data member) and returns it to the caller.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_VOID</Strong>
 : none.<Br>&nbsp
<Li><Strong>Argout:<Br>CONST_DEV_STRING</Strong>
 : Status descrition<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerWriteString"><!-- --></A>
<A NAME="DevSerWriteString"><!-- --></A>
<h2>4 - DevSerWriteString</h2>
<ul>
<Li><Strong>Description: </Strong> Write a string of characters to a serial line and return
the number of characters written.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_STRING</Strong>
 : String to write<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_LONG</Strong>
 : Number of characters written<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerWriteChar"><!-- --></A>
<A NAME="DevSerWriteChar"><!-- --></A>
<h2>5 - DevSerWriteChar</h2>
<ul>
<Li><Strong>Description: </Strong> Write N characters to a seria line and return the
number of characters written.<Br>&nbsp
<Li><Strong>Argin:<Br>DEVVAR_CHARARRAY</Strong>
 : Characters to write<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_LONG</Strong>
 : Number of characters written<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerReadString"><!-- --></A>
<A NAME="DevSerReadString"><!-- --></A>
<h2>6 - DevSerReadString</h2>
<ul>
<Li><Strong>Description: </Strong> Win32 method :
Read a string of characters, the type of read is specified in the
input parameter SL_RAW SL_NCHAR SL_LINE<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_LONG</Strong>
 : type of read SL_RAW SL_NCHAR SL_LINE<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_STRING</Strong>
 : String read<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerReadChar"><!-- --></A>
<A NAME="DevSerReadChar"><!-- --></A>
<h2>7 - DevSerReadChar</h2>
<ul>
<Li><Strong>Description: </Strong> Win32 method :
Read an array of characters, the type of read is specified in the
input parameter, it can be SL_RAW SL_NCHAR SL_LINE<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_LONG</Strong>
 : type of read SL_RAW SL_NCHAR SL_LINE<Br>&nbsp
<Li><Strong>Argout:<Br>DEVVAR_CHARARRAY</Strong>
 : Array of characters read<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="WriteRead"><!-- --></A>
<A NAME="WriteRead"><!-- --></A>
<h2>8 - WriteRead</h2>
<ul>
<Li><Strong>Description: </Strong> This method permit to send a request to a device throw the serial line and returns the
response of the device.
The commands write and read don't return until they have not finished.<Br>&nbsp
<Li><Strong>Argin:<Br>DEVVAR_LONGSTRINGARRAY</Strong>
 : type of reading strategy(RAW,NCHAR..),command to write on the port com<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_STRING</Strong>
 : response of the device behind the serial line<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerGetNChar"><!-- --></A>
<A NAME="DevSerGetNChar"><!-- --></A>
<h2>9 - DevSerGetNChar</h2>
<ul>
<Li><Strong>Description: </Strong> Return the number of chars available in receiving buffer<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_VOID</Strong>
 : no argin<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_LONG</Strong>
 : number of char available in receiving buffer<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerReadNChar"><!-- --></A>
<A NAME="DevSerReadNChar"><!-- --></A>
<h2>10 - DevSerReadNChar</h2>
<ul>
<Li><Strong>Description: </Strong> Read a string of N characters from the serial line
If there are no characters to be read returns an empty string.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_LONG</Strong>
 : number of the caracters to read on the serial line<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_STRING</Strong>
 : pointer to the string read updated<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerReadRaw"><!-- --></A>
<A NAME="DevSerReadRaw"><!-- --></A>
<h2>11 - DevSerReadRaw</h2>
<ul>
<Li><Strong>Description: </Strong> read a string from the serialline device in mode raw (no end
of string expected, just empty the entire serialline receiving buffer).<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_VOID</Strong>
 : no argin<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_STRING</Strong>
 : pointer to the string read updated<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerReadLine"><!-- --></A>
<A NAME="DevSerReadLine"><!-- --></A>
<h2>12 - DevSerReadLine</h2>
<ul>
<Li><Strong>Description: </Strong> read a string from the serialline device in mode line (up to
and including the character specified by the NewLine property<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_VOID</Strong>
 : no argin<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_STRING</Strong>
 : pointer to the string read updated<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerFlush"><!-- --></A>
<A NAME="DevSerFlush"><!-- --></A>
<h2>13 - DevSerFlush</h2>
<ul>
<Li><Strong>Description: </Strong> Win32 method :
Flush serial line port according to argin passed.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_LONG</Strong>
 : flush to do 0=input 1=output 2=both<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerSetParameter"><!-- --></A>
<A NAME="DevSerSetParameter"><!-- --></A>
<h2>14 - DevSerSetParameter</h2>
<ul>
<Li><Strong>Description: </Strong> Set serial line parameters<Br>&nbsp
<Li><Strong>Argin:<Br>DEVVAR_LONGARRAY</Strong>
 : device parameters in pair<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerSetTimeout"><!-- --></A>
<A NAME="DevSerSetTimeout"><!-- --></A>
<h2>15 - DevSerSetTimeout</h2>
<ul>
<Li><Strong>Description: </Strong> This command sets the new timeout (in ms).<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_SHORT</Strong>
 : Value of the timeout to set<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerSetParity"><!-- --></A>
<A NAME="DevSerSetParity"><!-- --></A>
<h2>16 - DevSerSetParity</h2>
<ul>
<Li><Strong>Description: </Strong> Sets the new parity of the serial line.
NONE 0
ODD 1
EVEN 3<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_SHORT</Strong>
 : The new parity to set.<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerSetCharLength"><!-- --></A>
<A NAME="DevSerSetCharLength"><!-- --></A>
<h2>17 - DevSerSetCharLength</h2>
<ul>
<Li><Strong>Description: </Strong> Sets the new charlength.
0 = 8 bits
1 = 7 bits
2 = 6 bits
3 = 5 bits<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_SHORT</Strong>
 : The new charlength to set<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerSetStopbit"><!-- --></A>
<A NAME="DevSerSetStopbit"><!-- --></A>
<h2>18 - DevSerSetStopbit</h2>
<ul>
<Li><Strong>Description: </Strong> Sets the new stop bit.
0 = none
1 = one stop
2 = 1.5 stop bit<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_SHORT</Strong>
 : The new stopbit to set<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerSetBaudrate"><!-- --></A>
<A NAME="DevSerSetBaudrate"><!-- --></A>
<h2>19 - DevSerSetBaudrate</h2>
<ul>
<Li><Strong>Description: </Strong> Sets the new baudrateof the serial line ( up to 4 Mega).
Default is 9600.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_ULONG</Strong>
 : The new baudrate to set<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerSetNewline"><!-- --></A>
<A NAME="DevSerSetNewline"><!-- --></A>
<h2>20 - DevSerSetNewline</h2>
<ul>
<Li><Strong>Description: </Strong> The new ending character in hexa.
Default is 0x13 (=CR<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_SHORT</Strong>
 : The new line character to set<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_VOID</Strong>
 : no argout<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerReadRetry"><!-- --></A>
<A NAME="DevSerReadRetry"><!-- --></A>
<h2>21 - DevSerReadRetry</h2>
<ul>
<Li><Strong>Description: </Strong> read a string from the serialline device in mode raw (no end
of string expected, just empty the entire serialline receiving buffer).
If read successfull, read again "nretry" times.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_LONG</Strong>
 : number of reading retries<Br>&nbsp
<Li><Strong>Argout:<Br>DEV_STRING</Strong>
 : pointer to the string read updated<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>
<A NAME="DevSerReadNBinData"><!-- --></A>
<A NAME="DevSerReadNBinData"><!-- --></A>
<h2>22 - DevSerReadNBinData</h2>
<ul>
<Li><Strong>Description: </Strong> Read the specified number of char from the serial line.
If the number of caracters is greater than caracters avaiable, this command returns
all caracters avaiables.
If there are no characters to be read returns an empty array.<Br>&nbsp
<Li><Strong>Argin:<Br>DEV_LONG</Strong>
 : nb char to read<Br>&nbsp
<Li><Strong>Argout:<Br>DEVVAR_CHARARRAY</Strong>
 : array of data<Br>&nbsp
<Li><Strong>Command allowed for: </Strong><Ul>
</Ul>
<Br>&nbsp
</ul><Br>
<Br>

<Center>
<Br>
<HR WIDTH="100%"></H5>
<H3> ESRF - Software Engineering Group </H33>
</Center>
</body>
</html>
