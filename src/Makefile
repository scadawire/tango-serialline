#=============================================================================
#
# file :        Makefile.h
#
# description : Include for the EventTester class.
#
# project :     Makefile to generate a Tango server
#
# $Author: xavela $
#
# $Revision: 1.4 $
#
# $Log: not supported by cvs2svn $
# Revision 1.3  2004/10/22 14:17:01  xavela
# xavier : only in win32 part, possibility to open a port COM higher than 9.
# changed TANGO_ROOT_WIN32 by SOLEIL_ROOT in the makefile.vc.
#
# Revision 1.2  2004/06/30 09:22:48  xavela
# xavier : ajout de la methode dev_ser_read_nretry()
# pour la partie win32
#
#
# copyleft :    European Synchrotron Radiation Facility
#               BP 220, Grenoble 38043
#               FRANCE
#
#=============================================================================
#  		This file is generated by POGO
#	(Program Obviously used to Generate tango Object)
#
#         (c) - Software Engineering Group - ESRF
#=============================================================================
#
linux = 1

ifdef _solaris
CC = CC
BIN_DIR = solaris7_CC
endif

ifdef linux
CC = c++
AR = ar
BIN_DIR = 
endif

TANGO_HOME   =  /usr/local
INCLUDE_DIRS =  -I$(TANGO_HOME)/include/$(BIN_DIR)	-I.
LIB_DIRS     =  -L $(TANGO_HOME)/lib/$(BIN_DIR)

ifdef _solaris
CXXFLAGS =  -mt -D_PTHREADS $(INCLUDE_DIRS)
LFLAGS =  -g $(LIB_DIRS)  		\
				-ltango			\
				-llog4tango		\
				-lomniORB4 		\
				-lomniDynamic4	\
				-lomnithread	\
				-lpthread		\
				-lposix4 -lsocket -lnsl 
endif

ifdef linux
CXXFLAGS =  -g -D_REENTRANT $(INCLUDE_DIRS)
LFLAGS =  -g $(LIB_DIRS)  		\
				-ltango			\
				-llog4tango		\
				-lomniORB4 		\
				-lomniDynamic4	\
				-lomnithread	\
				-ldl -lpthread 
endif



CLASS =	Serial

SVC_OBJS = 	main.o	\
		ClassFactory.o	\
		$(CLASS)Class.o	\
		$(CLASS).o

SVC_INC = 	$(CLASS)Class.h \
			$(CLASS).h


%.o: %.cpp $(SVC_INC)
	$(CC) $(CXXFLAGS) -c $<
			
all: $(CLASS)

$(CLASS):	$(SVC_OBJS)
	$(CC) $(SVC_OBJS) -o $(CLASS) $(LFLAGS)

event_client:	event_client.o 
	$(CC) event_client.o -o event_client $(LFLAGS)

clean:
	rm -f *.o $(CLASS) core
	
install:
	cp $(CLASS) $(TANGO_HOME)/bin/$(BIN_DIR)

field_install: Serial
	scp Serial root@eclfba2.ecs:/runtime/control/bin


