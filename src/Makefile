#=============================================================================
#
# file :        Makefile.h
#
# description : Include for the EventTester class.
#
# project :     Makefile to generate a Tango server
#
# $Author: syldup $
#
# $Revision: 1.1.1.1 $
#
# $Log: not supported by cvs2svn $
#
# copyleft :    European Synchrotron Radiation Facility
#               BP 220, Grenoble 38043
#               FRANCE
#
#=============================================================================
#  		This file is generated by POGO
#	(Program Obviously used to Generate tango Object)
#
#         (c) - Software Engineering Group - ESRF
#=============================================================================
#
linux = 1
ifdef _solaris
CC = CC
BIN_DIR = solaris7_CC
endif

ifdef linux
CC = c++-3.2.2
AR = ar rv
BIN_DIR = linux-i386
endif

TANGO_HOME   =  $(TANGO_ROOT)/tango
OMNI_HOME   =  $(TANGO_ROOT)/omniorb
INCLUDE_DIRS =  -I$(DEV_ROOT)/tango/api/cpp/server -I$(DEV_ROOT)/tango/api/cpp/client \
	-I$(TANGO_HOME)/$(BIN_DIR)/include	-I$(OMNI_HOME)/$(BIN_DIR)/include -I. 
#	-I/segfs/tango/ORB/ORB_src/omniORB/omniORB-4.0.0-rc1//include \
#	-I/segfs/tango/ORB/ORB_src/omniORB/omniORB-4.0.0-rc1//src/services/omniNotify/include
LIB_DIRS     =  -L $(TANGO_HOME)/$(BIN_DIR)/lib -L $(OMNI_HOME)/$(BIN_DIR)/lib

ifdef _solaris
CXXFLAGS =  -mt -D_PTHREADS $(INCLUDE_DIRS)
LFLAGS =  -g $(LIB_DIRS)  		\
				-ltango			\
				-llog4tango			\
				-lomniORB4 		\
				-lomniDynamic4	\
				-lomnithread	\
				-lpthread		\
				-lposix4 -lsocket -lnsl
endif

ifdef linux
CXXFLAGS =  -D_REENTRANT $(INCLUDE_DIRS)
LFLAGS =   $(LIB_DIRS)  		\
				-ltango \
				-llog4tango \
				-lomniORB4 		\
				-lomniDynamic4	\
				-lomnithread	\
				-ldl -lpthread
#	  -L/segfs/tango/ORB/ORB_src/omniORB/omniORB-4.0.0-rc1/lib
endif




CLASS =	Serial

SVC_OBJS = 	main.o	\
		ClassFactory.o	\
		$(CLASS)Class.o	\
		$(CLASS).o

SVC_INC = 	$(CLASS)Class.h \
			$(CLASS).h


%.o: %.cpp $(SVC_INC)
	$(CC) $(CXXFLAGS) -c $<
			
all: $(CLASS)

$(CLASS):	$(SVC_OBJS)
	$(CC) $(SVC_OBJS) -o $(CLASS) $(LFLAGS)

event_client:	event_client.o 
	$(CC) event_client.o -o event_client $(LFLAGS)

clean:
	rm -f *.o $(CLASS) core
	
install:
	cp $(CLASS) $(TANGO_HOME)/bin/$(BIN_DIR)



